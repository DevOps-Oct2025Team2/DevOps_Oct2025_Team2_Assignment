openapi: 3.0.3
info:
  title: Auth Service API
  version: 1.0.0
servers:
  - url: http://localhost:5000
paths:
  /api/login:
    post:
      summary: User login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username: { type: string }
                password: { type: string }
              required: [username, password]
      responses:
        "200": { description: Login successful }
        "400": { description: Invalid request }
        "401": { description: Invalid credentials }
  /api/profile:
    get:
      summary: Get user profile
      security: [{ Bearer: [] }]
      responses:
        "200": { description: Authenticated access granted }
        "401": { description: Unauthorized }
  /api/admin:
    get:
      summary: Admin access check
      security: [{ Bearer: [] }]
      responses:
        "200": { description: Admin access granted }
        "401": { description: Unauthorized }
        "403": { description: Forbidden }
  /api/admin/users:
    get:
      summary: List users
      security: [{ Bearer: [] }]
      responses:
        "200": { description: List of users }
        "401": { description: Unauthorized }
        "403": { description: Forbidden }
    post:
      summary: Create user
      security: [{ Bearer: [] }]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username: { type: string }
                password: { type: string }
                role: { type: string, enum: [admin, user] }
              required: [username, password, role]
      responses:
        "201": { description: User created }
        "400": { description: Invalid request }
        "401": { description: Unauthorized }
        "403": { description: Forbidden }
components:
  securitySchemes:
    Bearer:
      type: apiKey
      name: Authorization
      in: header